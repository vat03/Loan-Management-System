<div class="profile-container">
    <h2>Admin Profile</h2>
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    <mat-card *ngIf="profile" class="profile-card">
        <mat-card-header>
            <mat-card-title>{{ profile.username }}</mat-card-title>
            <mat-card-subtitle>{{ profile.roleName }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <p><strong>ID:</strong> {{ profile.id }}</p>
            <p><strong>Email:</strong> {{ profile.email }}</p>
            <p><strong>First Name:</strong> {{ profile.firstName || 'Not set' }}</p>
            <p><strong>Last Name:</strong> {{ profile.lastName || 'Not set' }}</p>
            <p><strong>Date of Birth:</strong> {{ profile.dateOfBirth || 'Not set' }}</p>
            <p><strong>Mobile Number:</strong> {{ profile.mobileNumber || 'Not set' }}</p>
            <p><strong>Gender:</strong> {{ profile.gender || 'Not set' }}</p>
        </mat-card-content>
    </mat-card>

    <mat-card class="update-card">
        <mat-card-header>
            <mat-card-title>Update Profile</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="updateForm" (ngSubmit)="updateProfile()">
                <mat-form-field appearance="fill">
                    <mat-label>Current Password</mat-label>
                    <input matInput type="password" formControlName="password" required>
                    <mat-error *ngIf="updateForm.get('password')?.hasError('required')">
                        Password is required
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>First Name</mat-label>
                    <input matInput formControlName="firstName">
                    <mat-error *ngIf="updateForm.get('firstName')?.hasError('maxlength')">
                        Maximum 50 characters
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Last Name</mat-label>
                    <input matInput formControlName="lastName">
                    <mat-error *ngIf="updateForm.get('lastName')?.hasError('maxlength')">
                        Maximum 50 characters
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Date of Birth</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="dateOfBirth">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Mobile Number</mat-label>
                    <input matInput formControlName="mobileNumber">
                    <mat-error *ngIf="updateForm.get('mobileNumber')?.hasError('pattern')">
                        Must be exactly 10 digits
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Gender</mat-label>
                    <mat-select formControlName="gender">
                        <mat-option value="MALE">Male</mat-option>
                        <mat-option value="FEMALE">Female</mat-option>
                        <mat-option value="OTHER">Other</mat-option>
                    </mat-select>
                </mat-form-field>

                <button mat-raised-button color="primary" type="submit" [disabled]="updateForm.invalid">
                    Update Profile
                </button>
            </form>
        </mat-card-content>
    </mat-card>
</div>